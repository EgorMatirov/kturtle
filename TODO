This is the TODO file of the KTurtle project, here the things are put that still need implmentation.
This list is devided into URGENT, BIG-TODOs, normalTODOs, TO-oeps-meDOitALLreadies and StillSubjectToDiscussions :-)

**** URGENT ****

cies: Next time the first things i'll do is finish off what lypanov started:
- fixing 'wait' command using lypanovs paradigm
- and fallbacks to the main eventloop (using pause/unpause's) so KTurtle wont be locked up during execution
- implement the ability to stop execution!
Sorry, cauze somthings dont work/work weird in the mean time :-)
// somehow i dont seem to understand the TreeNode::const_iterator i vs. it vs various node-pointers yet
// difficult matter :)
--> just dont use the wait funk and you should not notice any weird things (if you do tell me!)
>>>>>>>>>>>> mail sent to lypanov opening a discussion on his 'hack' which seems 2b a dead end


06 Jan. 2004 - annma: the KConfig XT stuff is done. Please note that locate("data", "kturtle/data/logokeywords.en_US.xml") being the default xml file, it does not appear in the config file. If there is nothing in the config file in TranslationFilePath, then this file is always taken.
Always load the xml file with
QFile xmlfile( Settings::translationFilePath() );
note: I left the kdDebug() in the lexer.cpp file.

cies: The KconfigXT issue: If an error like this
"""
  make[4]: Entering directory `/home/cies/kdenonbeta/kturtle/src'
  ./kturtle.kcfg ./settings.kcfgc; ret=$?; \
  if test "$ret" != 0; then rm -f settings.h ; exit $ret ; fi
  /bin/sh: line 1: ./kturtle.kcfg: Permission denied
  make[4]: *** [settings.h] Error 126
"""
happends when make'ing KTurtle form cvs one should change the first line of configure.in.in from:
  #MIN_CONFIG(3.0)
into:
  #MIN_CONFIG(3.2)
that will fix it :-)

**** BIG-TODOs: ****

cies: Implement either a Kate-part or a KTextEditor as editor widget. ANNMA DID IT!!!
Now the minor issues regarding the intergretion should be looked at
- editor-kaction-connections
- on save the title does not appear in the titlebar
- save as does not open in the logo dir
- Qfile->KURL migration
- CLI-file-selection (for mimetype eaz)
- recentfileshistory (action added, have to get it working)
- linenumbers (what di we need more than the View->Show Line numbers or F11 menu?)

- highlighting (a kturtle language sensitive highlight script)
- loads for things sould be hidden and reordered (annma: we can do a shouut out)
File->reload: do we need that one?

- some standadisation, annma i think you know most on encodings (what about MS-DOS <br>'s)
- ...
I *love* to see so much free funktionality in kturtle!


cies: Make the interpreter (stolen from wsbasic.sf.net) (executer, parser, lexer, number and treenode) more native Qt.
Right now they are a mixture of standard-CLI-C++ and Qt thingies (i put the Qt thingies there). I tried to do that but i found that i'm not comfortable with the concept of streams -- which are used a lot in the interpreter. Especially streaming QString was an obstacle i couldnt take.



cies: The manual...
Au! That is a big one, lets first decide on the chapter structure. See the "StillSubjectToDiscussions" below...


cies: Make good error messages with links to corresponing help pages.
- Make an error message class that inherates some dialog thing (it should have: help-link-button, details, short error title and origion (Parse error), 'the-row-of-error', and a small description (maybe the description should contain links to help pagen on certain commands/ methods/ etc.) and maybe even a small hint or hint button
- Refine the way error message get emitted, problems: Ugly-, short-, technical messages. Sometimes moere than one messages gets emmitted right now only the 1st msg is shown -- the 1st may not allways point to the 'core ot error'.
>>>>does anyone know a K-app that allready uses this F1-context-sensitive-help style?



cies: Implement an 'abort' funktion into the interpretor. So an endless execution can be aborted.





**** normalTODOs ****


Blocking funktions:
file: reload, export
edit: block selection, gotoline, deselect, find next/previous, overwritemode
view: wordwrapping-, schema- and codefolding funks, commandline, icon border, colorpicker->tools
setting (should be left from help?): editor settings? -> with good defaults we can block it right?
help (to the far right?)
bookmarks: as a whole
tools: only the indentation/commentation should stay imo. (and the picker comes here)




cies:INS, ROW and COL in the statusbar would be nice



Licence: provide a proper licence and have copyrights in all files

cies: Printing.
When the print aktion is called give the user a small-choise-kdialog: "print the code", "print the canvas" or "print both" (the last one is optional). Maybe a reference (in the manual) to ksnapshot will be nice.


cies: get all the commands in the logokeywords.*.xml file working properly, and remove the commands that are not needed:
Need to work eventually:
- input/ inputwindow
- sprite* (i'll maybe look into this when i have Qt3.3 which fixes the nasty crashbug that came across)
- foreach-(word,...)-in-<string>-seperated-by-<string>-do-[-...-] needs a lot of work (i like the functionality)
- 'ask' and 'speed' will come later -- me has to focus and concentrate
- 'learn' also needs work: see BIG-TODOs -> "Remove the [ and ]"
- <joke> and what about a 'goto' command ( you can never make them mistakes young enough, muahoahoaaaa >:-} ) <joke> well?
Maybe need to be removed:
- write (writing files from logo... nah)
- substr (a bit hard to use { a="qwerty"; substr(a,1,3) // outputs "qwe" } for kids not really usefull either) but if called 'cutstring' it might be a nice funktion.



cies: Ingore case of commands
and remenber how the command was typed so it can be issued properly in i.e. err msgs





cies: a fontchooser would be fun
30/12/2003 annma: for the editor font? I can do it
04/01/2003 we'll see after the editor part is done



annma: color-picker: maybe the code could be pasted directly in the editor at the cursor point (see after the editor part is done)




cies: a press-F1-for-context-help...
Press F1 while in a command and see help on it
- wait for Kate-part?
- what app does this allready (so I can study it.)







**** TO-oeps-IdidItAllReadies: ****



cies: Make a dir and put some examples/test in there...
Let be a little nice to the people how want to get started, or just want to have a peek, right?
It would also be nice to test for regressions in the future.
put a sample code file in kturtle/examples and get it load as an example maybe in File -> Open example



cies: remove some debug crap from the canvas.cpp, I refer to leave it there till mid.03.2003.




**** StillSubjectToDiscussions ****


annma - 29th December 2003
about the resizing
I think the canvas size should fill all the right side under the toolbar when KTurtle is started. When resizing the window with the mouse, the canvas grows bigger, everything resize smoothly (-> resizeEvent( QResizeEvent * )).
You can leave the resizing option of the canvas in the Settings but only for having the canvas bigger. That would mean setting minimums in the config dialog.

cies: Sorry i have to disagree, let me explain: a lot of logoscripts will be written on a certain canvas size, if the canvas is made bigger the script will give 'broken' output. I also dont have a way to update the 'wrapping' if a canvas is resized. IMHO the canvassize should be changed by a command, nl. canvassize x,y -- which works on my side of mother earth :-) IMHO all changes to the canvas MUST be done by commands and not by clicky-clicky... Putting the 'initial canvas size' in the settings window is only for the teatcher to setup all his computers.

Sorry for beeing so inflexible... *Really*  I am still open for discussion! :-) I just have developed a certain vision of KTurtle's future that is really hard to let go.
(annma 30/12/2003 ok then, but the config option should be made clearer that the new canvas size will be next start)



Annma: Idea from my daughter: have a Tux and a Konqui as alternate turtle for the cursor. I don't know if it's possible and if you like it ;)

cies: That is a good plan! (you can tell your daughter that the plan -- just like any of her feedback -- is very appreciated :-) I have tux allready in my sprites dir (I'm a fan too!)... but there's one nice thing about the turtle: this animal is very regocnisable from above, and the head points in the direction of movement. Tux is more a front faced character, so nice would be to have an option to put the automatic turning off, and to have a different method to turn tux by command. [please note that i wont do any extra work on getting qt3.3 (needed for sprites), it comes when it comes]





cies: On the docbook 'manual' page...

I dont hav much experience with this (doc an KDE) but i seeing 3 documents 1) Quickstart, 2) THE MANUAL and 3) A Tutorial


Maybe 1 & 3 should be combined, what do you think?

annma 30/12/2003 Quick Start might be a wizard run at first start and could be accessed later or the classical 'tips of the day' dialog. A tutorial is indeed needed, maybe within KTurtle, in the Settings menu. I can help with the writing.

A graphical Quick Start wizard was suggested on IRC using flash animations.

cies: I think the syntax of the language should first be more mature, it changes too much right now... This will settle down in a few moths i hope :-)
For the settingsmenu: if you know a better string than 'initial canvas size' (iirc) feel free to... etc.




Here a small start with the manual chapters, FEEDBACK NEEDED!

THE MANUAL

starting logo
  the mainwindow
     the canvas
     the text input
     the toolbar
     the menus
        file
	edit
	view
	tools
	   colorpicker
           fontchooser
	settings
           configuring klogo
               the language
	       initial values
	help
	   using the help
  

the basics of logo programming
     first steps... (just a few commands: print, repeat, fw-tr) [just to show how easy it is!]
     simple calculations: 1+1=...
     variables: creating 'number containers'
     strings: creating 'text containers'
     logic: asking the computer simple questions
        
        and/or/not: combining simple questions 
     if ... do: logic conditions
        if ... do ... else
     loops: repeat and friends
        repeat ... times: the simplelest loop
	while ... do: a conditioned loop
        for ... to ... do: a counting loop
     moving the turlte
        forward and backward
        turnleft and turnright
	direction
	go/gox/goy
	center
     the turtle has a pen
        penup/pendown
        pencolor
	penwidth
     the canvas
        canvascolor
	clean
	canvassize
     sprites: turtle has new clothes
        hiding the turtle
	

     learn: your own commands!
        simplify
	use others code
     
 




TREADDING, TIMER LOOPS OR SLEEP()/NANOSLEEP() ??

I run into a problem when trying to implement the 'wait' funktion, how to have a C++ program 'wait' without jamming all internals ( what happends with sleep() ). I though threadding, lypanov hates threadding and says its better avoided; he proposes a qtimer trick, see the irc conversation here:


>cies< but i'm writing an logo interpreter for educational puposes
>cies< and i want to add a 'wait' function
>cies< like: 'wait 5' has the script wait for 5 seconds
>cies< i though (in fact i googled) hmmm sleep() or nanosleep()
>cies< but that wil jam the whole app, right?
[lypanov] re
>cies< so i need to have the execution class of the interpeter pause it execution
>cies< without jamming the whole program
[lypanov] qtimer
>cies< ill look into that
>cies< thanks!
>cies< (again)
[lypanov] np :)
[lypanov] ;yup. sleep will jam the whole app
[lypanov] i would say
[lypanov] add a singleshot timer
[lypanov] that goes off in 5 minutes
[lypanov] stop the interpreter
[lypanov] and make the singleshot timer
[lypanov] send a "unpauseInterpreter"
[lypanov] signal
>cies< lypanov: ping?
>cies< i tried ver hard but i dont understand...
>cies< i cant make a solution from the above.
[lypanov] re
[lypanov] umm
[lypanov] you read qtimer doc?
>cies< yes offcourse
>cies< you say 5 minutes... dont you mean 5 seconds?
>cies< well
>cies< right after the qtimer started the execution-class should fall back into the main event loop right?
>cies< ...but without destroying itself
>cies< [i dont know how to do this]
>cies< the when "unpauseInterpreter" is emitted (after 5 secs) the executer should go on exactly where is was 'interrupted', right?
>cies< [i dont know how to do this either]
>cies< please note this is my first qt-app
>cies< and my first c++ app
[lypanov] dum di dum
[lypanov] nope
[lypanov] qtimer
[lypanov] ::singleshot
[lypanov] or whatever its called
[lypanov] sends a signal
[lypanov] you need to
[lypanov] make a slot:
[lypanov] and
[lypanov] add a "unpauseInterpreter" slot
[lypanov] which does
[lypanov] {
[lypanov]     m_interpreter->unpause()
[lypanov] }
